@using System.Threading.Tasks

@model SimplCommerce.Module.Search.Areas.Search.ViewModels.SearchResult
@{
    ViewBag.Title = "Search";
}

@section head {
    <link simpl-append-version="true" href="~/lib/nouislider/distribute/nouislider.min.css" rel="stylesheet" />
}


<style>
    .double-block .content-block.main {
        width: 890px !important;
    }
</style>
<div class="main-page left">

    <!-- BEGIN .single-block -->
    <div class="single-block">

        <!-- BEGIN .content-block -->
        <div class="content-block main left">

            <div class="block">
                <div class="block-title">
                    <h2>Kết quả tìm kiếm cho: @Model.CurrentSearchOption.Query</h2> (@Model.TotalProduct kết quả)
                </div>
                <div class="block-content">
                    <div class="row product-list">
                        @foreach (var product in Model.Products)
                        {
                            <div class="col-xs-6 col-md-4 item-product">
                                <partial name="/Areas/Catalog/Views/Shared/_ProductThumbnail.cshtml" model="product" />
                            </div>
                        }
                    </div>

                    <div class="row">
                        <div class="col-md-12 text-right">
                            <cs-pager cs-paging-pagesize="@Model.CurrentSearchOption.PageSize"
                                      cs-paging-pagenumber="@Model.CurrentSearchOption.Page"
                                      cs-paging-totalitems="@Model.TotalProduct"
                                      cs-pagenumber-param="page"
                                      asp-basehref="~/search"
                                      asp-all-route-data="@Model.CurrentSearchOption.ToDictionary()"></cs-pager>
                        </div>
                    </div>

                </div>
            </div>

            <!-- END .content-block -->
        </div>

        <!-- END .single-block -->
    </div>

    <!-- END .main-page -->
</div>

@section scripts {
    <script simpl-append-version="true" src="~/lib/wnumb/wNumb.js"></script>
    <script simpl-append-version="true" src="~/lib/nouislider/distribute/nouislider.min.js"></script>

    <script>
        var productFilter = {};
        productFilter.currentSearchOption = @Html.Raw(Model.CurrentSearchOption.ToJson());
        productFilter.priceSetting = {
            min: @Model.FilterOption.Price.MinPrice.ToString("F0"),
            max: @Model.FilterOption.Price.MaxPrice.ToString("F0"),
            currentMin: @((Model.CurrentSearchOption.MinPrice ?? Model.FilterOption.Price.MinPrice).ToString("F0")),
            currentMax: @((Model.CurrentSearchOption.MaxPrice ?? Model.FilterOption.Price.MaxPrice).ToString("F0"))
        };
    </script>
    <script simpl-append-version="true" src="~/modules/catalog/product-filter.js"></script>
}
